apply from: "$rootDir/gradle/spring-boot-app.gradle"
apply from: "$rootDir/gradle/spring-boot-jdbc.gradle"
apply from: "$rootDir/gradle/spring-boot-web.gradle"

description = 'The Codekvast Rule Engine'
applicationName = 'codekvast-rule-engine'
archivesBaseName = 'codekvast-rule-engine'
version = codekvastVersion
mainClassName = 'io.codekvast.rule_engine.CodekvastRuleEngineApplication'

dependencies {
    implementation project(":product:server:common")

    runtimeOnly project(':product:server:db-migration')
}

run {
    dependsOn startDockerContainers

    jvmArgs = [
        '-enableassertions',
    ]

    args = [
        "--logging.file.name=$buildDir/log/${applicationName}.log"
    ]
}

bootRun {
    dependsOn startDockerContainers

    jvmArgs = run.jvmArgs
    args = run.args
}

//--- Packaging ------------------------------------------------------------------------------------------------------------------
bootJar {
    launchScript {
        properties([
            'initInfoProvides'        : applicationName,
            'initInfoShortDescription': 'Codekvast Rule Engine',
            'initInfoDescription'     : 'Codekvast Rule Engine handles business rules',
        ])
    }
}
