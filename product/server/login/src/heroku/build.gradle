//--- Heroku add-on

task validateHerokuAddOnManifest(type: Exec) {
    description "Validates the Heroku addon-manifest.json"
    group "Heroku Partner"

    def timestampFile = file("$buildDir/${name}.timestamp")

    inputs.dir file('src/heroku')
    outputs.file timestampFile

    executable 'kensa'
    workingDir 'src/heroku'

    args 'test', 'manifest'

    doLast {
        timestampFile.text = "${java.time.Instant.now()}\n"
    }
}
check.dependsOn validateHerokuAddOnManifest
