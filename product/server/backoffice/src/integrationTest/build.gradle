// --- Integration test stuff -------------------------------------------------------------------------------

testSets {
    integrationTest
}

dependencies {
    integrationTestImplementation 'org.springframework.amqp:spring-rabbit'
    integrationTestImplementation testcontainers
}

integrationTest {
    doFirst {
        mkdir "$buildDir/log"
    }
}

compileIntegrationTestKotlin {
    kotlinOptions {
        javaParameters = true
        jvmTarget = '11'
        freeCompilerArgs = ['-Xjsr305=strict']
    }
}

integrationTest.mustRunAfter test
check.dependsOn integrationTest
