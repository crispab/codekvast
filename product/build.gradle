apply plugin: 'distribution'

version = "0.4"

distributions {
    agent {
        baseName = 'codekvast-agent'
        contents {
            from tasks.getByPath(":product:agent:codekvast-agent:installApp")
            from tasks.getByPath(":product:agent:collector:shadowJar"), { into "endorsed" }
        }
    }

    server {
        baseName = 'codekvast-server'
        contents {
            from tasks.getByPath(":product:server:codekvast-server:installApp")
        }
    }
}

task build(dependsOn: [agentDistZip, serverDistZip]) {
    description = "Builds distribution zips for agent and server"
    group "build"
}
