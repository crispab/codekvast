buildscript {
    repositories { maven { url "https://maven.eveoh.nl/content/repositories/releases" } }
    dependencies { classpath "nl.eveoh:gradle-aspectj:1.6" }
}

apply plugin: 'aspectj'
apply plugin: 'application'

mainClassName = "sample.app.SampleApp"
archivesBaseName = "standalone-app-codekvast"

ext.aspectjVersion = '1.8.6'

dependencies {
    compile project(":product:agent:collector")

    ajInpath project(":sample:standalone-app")
}

configurations.all {
    exclude module: "aspectjweaver"
}

compileAspect {

    def logFile = file("$buildDir/aspectj.log")

    doFirst {
        logFile.mkdirs()
        logFile.delete()
    }

    additionalAjcArgs = [
            'verbose'      : false,
            'showWeaveInfo': true,
            'log'          : logFile,
    ]
}
