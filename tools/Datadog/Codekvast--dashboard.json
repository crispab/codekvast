{"title":"Codekvast","description":"","widgets":[{"id":689902583462500,"definition":{"title":"Database","type":"group","layout_type":"ordered","widgets":[{"id":3936734938894704,"definition":{"type":"timeseries","requests":[{"q":"sum:aws.rds.database_connections{$env}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"RDS connections","show_legend":false,"legend_size":"0"}},{"id":4021293787201058,"definition":{"type":"timeseries","requests":[{"q":"min:aws.rds.cpucredit_balance{$env} by {dbname}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"min:aws.rds.burst_balance{$env} by {dbname}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"RDS credit balance","show_legend":false,"legend_size":"0"}},{"id":2292658028897524,"definition":{"type":"timeseries","requests":[{"q":"max:hikaricp.connections.active{$env} by {service}","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Active JDBC connections","show_legend":false,"legend_size":"0"}},{"id":6187553556690479,"definition":{"type":"timeseries","requests":[{"q":"avg:aws.rds.write_throughput{$env}.as_rate()","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"avg:aws.rds.read_throughput{$env}.as_rate()","display_type":"line","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"RDS throughput","show_legend":false,"legend_size":"0"}},{"id":8926680383602704,"definition":{"type":"timeseries","requests":[{"q":"avg:codekvast.lock.duration.max{*} by {lock}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false},{"q":"avg:codekvast.lock.wait.max{*} by {lock}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Codekvast locks","show_legend":false,"legend_size":"0"}}]}},{"id":7786470038000914,"definition":{"title":"Codekvast","type":"group","layout_type":"ordered","widgets":[{"id":5188305481450398,"definition":{"type":"timeseries","requests":[{"q":"max:codekvast.agents{$env,state:alive}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"max:codekvast.agents{$env,state:dead}","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Codekvast agents","show_legend":false,"legend_size":"0"}},{"id":357806738,"definition":{"type":"timeseries","requests":[{"q":"sum:codekvast.agent.polls{$env}.as_count()","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Agent polls","show_legend":false,"legend_size":"0"}},{"id":357806648,"definition":{"type":"timeseries","requests":[{"q":"sum:codekvast.publication.accepted{$env} by {type}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"events":[{"q":"Started","tags_execution":"and"}],"title":"Accepted publications","show_legend":false,"legend_size":"0"}},{"id":6785242223157962,"definition":{"type":"timeseries","requests":[{"q":"avg:codekvast.publication.import.duration.max{*} by {type}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Publication import time","show_legend":false,"legend_size":"0"}},{"id":361982116,"definition":{"type":"timeseries","requests":[{"q":"sum:logback.events{$env,level:error} by {service}","display_type":"bars","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"on_right_yaxis":false},{"q":"sum:logback.events{level:warn,$env} by {service}","display_type":"bars","style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Logged errors and warnings","show_legend":false,"legend_size":"0"}},{"id":676371975556191,"definition":{"type":"timeseries","requests":[{"q":"max:codekvast.publication.queueLength{*}","display_type":"line"}],"title":"codekvast.publication.queueLength","show_legend":false,"legend_size":"0"}},{"id":1837998486364456,"definition":{"type":"timeseries","requests":[{"q":"max:rabbitmq.published{$env}.as_count(), max:rabbitmq.consumed{$env}.as_count()","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"RabbitMQ events","show_legend":false,"legend_size":"0"}},{"id":7940024245738866,"definition":{"type":"timeseries","requests":[{"q":"avg:codekvast.event_consumed.duration.max{$env} by {event}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Event processing time","show_legend":false,"legend_size":"0"}},{"id":5213563422786000,"definition":{"type":"query_value","requests":[{"q":"sum:rabbitmq.published{$env}.as_count()","aggregator":"sum"}],"title":"Published RabbitMQ messages","autoscale":true,"precision":0}}]}},{"id":7440645918748430,"definition":{"title":"Resources","type":"group","layout_type":"ordered","widgets":[{"id":361934539,"definition":{"type":"timeseries","requests":[{"q":"max:aws.ecs.service.cpuutilization{*} by {servicename}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"ECS CPU utilization %","show_legend":false,"legend_size":"0"}},{"id":361924868,"definition":{"type":"timeseries","requests":[{"q":"exclude_null(avg:ecs.fargate.mem.usage{$env} by {task_family})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"ECS memory","show_legend":false,"legend_size":"0"}},{"id":4112987148610942,"definition":{"type":"timeseries","requests":[{"q":"avg:jvm.memory.used{*} by {service}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"avg:jvm.memory.committed{*} by {service}","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"JVM memory used MB","time":{},"show_legend":false,"legend_size":"0"}},{"id":361924560,"definition":{"type":"timeseries","requests":[{"q":"avg:jvm.gc.pause.avg{$env} by {service}","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"scale":"linear"},"markers":[{"value":"y = 500","display_type":"info dashed","label":"y = 500"}],"title":"JVM GC pauses","time":{},"show_legend":false,"legend_size":"0"}}]}},{"id":3180070761901734,"definition":{"title":"Misc","type":"group","layout_type":"ordered","widgets":[{"id":5198402760518996,"definition":{"type":"timeseries","requests":[{"q":"sum:aws.ecs.service.running{*} by {service}","display_type":"line","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"on_right_yaxis":false},{"q":"sum:aws.ecs.service.pending{*} by {service}","display_type":"line","style":{"palette":"cool","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"ECS tasks","show_legend":false,"legend_size":"0"}},{"id":8936649037778896,"definition":{"type":"timeseries","requests":[{"q":"sum:codekvast.lifecycle{$env} by {event,service}.as_count()","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Service lifecycle events","show_legend":false,"legend_size":"0"}},{"id":5058845974203168,"definition":{"type":"timeseries","requests":[{"q":"max:aws.applicationelb.un_healthy_host_count.maximum{$env} by {name}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"ALB unhealthy targets","show_legend":false,"legend_size":"0"}},{"id":357824455,"definition":{"type":"timeseries","requests":[{"q":"avg:codekvast.login.count{$env} by {source}","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Logins","show_legend":false,"legend_size":"0"}}]}}],"template_variables":[{"name":"env","default":"*","prefix":"env"},{"name":"service","default":"*","prefix":"service"}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"id":"twx-dkr-v5y"}