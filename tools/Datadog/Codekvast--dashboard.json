{"title":"Codekvast","description":"","widgets":[{"id":7786470038000914,"definition":{"title":"Codekvast","type":"group","layout_type":"ordered","widgets":[{"id":5188305481450398,"definition":{"title":"Codekvast agents","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:codekvast.agents{$env,state:alive}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:codekvast.agents{$env,state:dead}"}],"style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":357806738,"definition":{"title":"Agent polls","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:codekvast.agent.polls{$env}.as_count()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":357806648,"definition":{"title":"Accepted publications","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:codekvast.publication.accepted{$env} by {type}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"events":[{"q":"Started","tags_execution":"and"}],"markers":[]}},{"id":6785242223157962,"definition":{"title":"Publication import time","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:codekvast.publication.import.duration.max{$env} by {type}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":361982116,"definition":{"title":"Logged errors and warnings","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:logback.events{$env,level:error,$service} by {service}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:logback.events{level:warn,$env,$service} by {service}"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":676371975556191,"definition":{"title":"codekvast.publication.queueLength","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:codekvast.publication.queueLength{$env}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1837998486364456,"definition":{"title":"RabbitMQ events","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:rabbitmq.published{$env}.as_count()"},{"data_source":"metrics","name":"query2","query":"max:rabbitmq.consumed{$env}.as_count()"}],"formulas":[{"formula":"query1","alias":"published"},{"formula":"query2","alias":"consumed"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7940024245738866,"definition":{"title":"Event processing time","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:codekvast.event_consumed.duration.max{$env} by {event}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":5213563422786000,"definition":{"title":"Published RabbitMQ messages","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:rabbitmq.published{$env}.as_count()","aggregator":"sum"}]}],"autoscale":true,"precision":0}},{"id":702164189370887,"definition":{"title":"HTTP response time p99","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"max:aws.applicationelb.target_response_time.p99{$env}","data_source":"metrics","name":"query1"},{"query":"max:aws.applicationelb.target_response_time.p95{$env}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":689902583462500,"definition":{"title":"Database","type":"group","layout_type":"ordered","widgets":[{"id":3936734938894704,"definition":{"title":"RDS connections","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.rds.database_connections{$env}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":4021293787201058,"definition":{"title":"RDS credit balance","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"min:aws.rds.cpucredit_balance{$env} by {dbname}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"min:aws.rds.burst_balance{$env} by {dbname}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":2292658028897524,"definition":{"title":"Active JDBC connections","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:hikaricp.connections.active{$env,$service} by {service}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":6187553556690479,"definition":{"title":"RDS throughput","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.rds.write_throughput{$env}.as_rate()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.rds.read_throughput{$env}.as_rate()"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":8926680383602704,"definition":{"title":"Codekvast locks","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:codekvast.lock.duration.max{$env} by {lock}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:codekvast.lock.wait.max{$env} by {lock}"}],"style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":7440645918748430,"definition":{"title":"Resources","type":"group","layout_type":"ordered","widgets":[{"id":361934539,"definition":{"title":"ECS CPU utilization %","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:aws.ecs.service.cpuutilization{$env} by {servicename}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":361924868,"definition":{"title":"ECS memory","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:ecs.fargate.mem.usage{$env} by {task_family,short_image}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":4112987148610942,"definition":{"title":"JVM memory used MB","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:jvm.memory.used{$env,$service} by {service}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:jvm.memory.committed{$env,$service} by {service}"}],"style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":361924560,"definition":{"title":"JVM GC pauses","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:jvm.gc.pause.avg{$env,$service} by {service}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear"},"markers":[{"label":"y = 500","value":"y = 500","display_type":"info dashed"}]}}]}},{"id":3180070761901734,"definition":{"title":"Lifecycle","type":"group","layout_type":"ordered","widgets":[{"id":5198402760518996,"definition":{"title":"ECS tasks","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.ecs.service.running{*} by {service}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.ecs.service.pending{*} by {service}"}],"style":{"palette":"cool","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":8936649037778896,"definition":{"title":"Service lifecycle events","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:codekvast.lifecycle{$env,$service} by {event,service}.as_count()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5058845974203168,"definition":{"title":"ALB unhealthy targets","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"max:aws.applicationelb.un_healthy_host_count.maximum{$env} by {name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":357824455,"definition":{"title":"Logins","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:codekvast.login.count{$env} by {source}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}}]}}],"template_variables":[{"name":"env","prefix":"env","available_values":[],"default":"*"},{"name":"service","prefix":"service","available_values":[],"default":"*"}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"auto","id":"twx-dkr-v5y"}