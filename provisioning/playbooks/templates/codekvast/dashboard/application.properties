#------------------------------------------------------------------------
# {{ ansible_managed }}
#
# Environment dependent configuration of Codekvast Dashboard
#------------------------------------------------------------------------

# Which HTTP port shall we use?
server.port                         = {{ service_port }}
management.port                     = {{ management_port }}

# Where is the database?
spring.datasource.url               = jdbc:mariadb://{{ database_dns_names[0] }}/codekvast

# What password should the application use when connecting to the data source?
spring.datasource.password          = {{ mysql_application_password }}

# Where to send the logging output?
logging.file                        = /var/log/codekvast/application.log
logging.pattern.level               = {{ ec2_tag_CNAME0.split('.', 1)[0] }} %5p
server.undertow.accesslog.dir       = /var/log/codekvast/
server.undertow.accesslog.prefix    = access.

# What is the name of the HTTP session cookie? (also used by the AWS Elastic Load Balancer)
server.session.cookie.name          = {{ settings.session.cookie.name }}

# Where should uploaded publications be stored?
codekvast.queuePath                 = {{ queuePath }}

# How often shall we poll the queue path for import files?
codekvast.fileImportIntervalSeconds = {{ fileImportIntervalSeconds }}

# Should imported publications be deleted after a successful import?
# codekvast.deleteImportedFiles = true

# What to log?
logging.level.io.codekvast          = DEBUG

# Which secret shall we use when signing webapp JWT tokens?
codekvast.dashboardJwtSecret          = {{ codekvast_dashboardJwtSecret }}

# How long shall a webapp JWT token live?
codekvast.dashboardJwtExpirationHours = {{ codekvast_dashboardJwtExpirationHours }}

# What token shall we use when posting to the Slack Incoming Webhook?
codekvast.slackWebHookToken           = {{ codekvast_slackWebhookToken }}

# What is my server's distinct CNAME?
codekvast.dnsCname                    = {{ ec2_tag_CNAME0 }}
